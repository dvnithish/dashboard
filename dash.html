<!DOCTYPE html>
<html>
<head>
  
  <style>
    .button {
      width: 130px;
      font-weight: bolder;
      font-size: 25px;
    }
  
    .selected {
      background-color: green;
    }
  </style>
  
   <div>
    <div>
      <div class="container">
        <h1 style="font-size: 55px">VEHICLE DASHBOARD DISPLAY</h1>
        <button style="width: 500px; font-size:50px; height: 150px; font-weight:bolder; "class="button defect" data-value="Vehicle NG" onclick="handleButtonClick(this, 'Vehicle NG', 'defect')">Vehicle NG</button>
        <button style="width: 500px; font-size:50px; height: 150px; font-weight:bolder; "class="button defect" data-value="Vehicle OK" onclick="handleButtonClick(this, 'Vehicle OK', 'defect')">Vehicle OK</button>
      <br>
      <br>
      <div>
        <button style="width: 240px; font-size:40px; height: 130px; font-weight:bolder; "class="button linenumber" data-value="line 1" onclick="handleButtonClick(this, 'line 1', 'linenumber')">Line 1</button>
        <button style="width: 240px; font-size:40px; height: 130px; font-weight:bolder; "class="button linenumber" data-value="line 2" onclick="handleButtonClick(this, 'line 2', 'linenumber')">Line 2</button>
        <button style="width: 240px; font-size:40px; height: 130px; font-weight:bolder; "class="button linenumber" data-value="line 3" onclick="handleButtonClick(this, 'line 3', 'linenumber')">Line 3</button>
        <button style="width: 240px; font-size:40px; height: 130px; font-weight:bolder; "class="button linenumber" data-value="line 4" onclick="handleButtonClick(this, 'line 4', 'linenumber')">Line 4</button>
      </div>
      <br>
      <div>
        <button style="width: 115px; font-size:30px; height: 130px; font-weight:bolder; "class="button department" data-value="AF" onclick="handleButtonClick(this, 'AF', 'department')">AF</button>
        <button style="width: 115px; font-size:30px; height: 130px; font-weight:bolder; "class="button department" data-value="PA" onclick="handleButtonClick(this, 'PA', 'department')">PA</button>
        <button style="width: 115px; font-size:30px; height: 130px; font-weight:bolder; "class="button department" data-value="WE1" onclick="handleButtonClick(this, 'WE1', 'department')">WE1</button>
        <button style="width: 115px; font-size:30px; height: 130px; font-weight:bolder; "class="button department" data-value="WE2" onclick="handleButtonClick(this, 'WE2', 'department')">WE2</button>
        <button style="width: 115px; font-size:30px; height: 130px; font-weight:bolder; "class="button department" data-value="PBPQ" onclick="handleButtonClick(this, 'PBPQ', 'department')">PBPQ</button>
        <button style="width: 115px; font-size:30px; height: 130px; font-weight:bolder; "class="button department" data-value="PQ" onclick="handleButtonClick(this, 'PQ', 'department')">PQ</button>
        <button style="width: 115px; font-size:30px; height: 130px; font-weight:bolder; "class="button department" data-value="AE" onclick="handleButtonClick(this, 'AE', 'department')">AE</button>
        <button style="width: 115px; font-size:30px; height: 130px; font-weight:bolder; "class="button department" data-value="OTHER" onclick="handleButtonClick(this, 'OTHER', 'department')">OTHER</button>
      </div>
    </div>
</div>

</style>
<script>
var selectedDefect = "";
var selectedLine = "";
var selectedDepartment = "";

function updateResults() {
  document.getElementById("defect").textContent = selectedDefect;
  document.getElementById("linenumber").textContent = selectedLine;
  document.getElementById("department").textContent = selectedDepartment;
}

function handleButtonClick(button, value, type) {
  if (type === "defect") {
    selectedDefect = selectedDefect === value ? "" : value;
  } else if (type === "linenumber") {
    selectedLine = selectedLine === value ? "" : value;
  } else if (type === "department") {
    selectedDepartment = selectedDepartment === value ? "" : value;
  }

  updateResults();
  updateButtonStyles(type);
  moveSelectedButton(button, value, type);
}

function updateButtonStyles(type) {
  var buttons = document.querySelectorAll("." + type);

  buttons.forEach(function(button) {
    if (
     
        (button.getAttribute("data-value") === selectedDefect ||button.getAttribute("data-value") === selectedLine ||
          button.getAttribute("data-value") === selectedDepartment)
    ) {
      button.classList.add("green-button");
    } else {
      button.classList.remove("green-button");
    }
  });
}

function moveSelectedButton(button, value, type) {
  const container2 = document.getElementById("container2");
  const newButton = document.createElement("button");
  newButton.className = "button " + type;
  newButton.setAttribute("data-value", value);
  newButton.textContent = value;
  container2.appendChild(newButton);
}

 

function updateTimeAndDate() {
  var now = new Date();
  currentDate = now.toDateString();
  currentTime = now.toLocaleTimeString();

 

  updateResults();
}

 

// Call updateTimeAndDate function initially and every second
updateTimeAndDate();
setInterval(updateTimeAndDate, 1000);
</script>

<div class="container">
    <br>
    
  <label for="inputValue"></label>
  <input style="height: 50px; width: 1000px;"type="text" id="inputValue" autofocus placeholder="Click Scan Box">
  <button style="font-weight: bold; height: 50px; width: 50;" onclick="recordValue() ">OK</button> 
  
  
  <div id="selectedButtons"></div>
  <br>
  <p style="width: 30px; font-size: 50px; font-weight: bold;">FrameNo:<span id="vehicleno"></span></p>
  <p style="width: 250px; font-size: 20px; font-weight: bold;"> Date : <span id="date"></span></p>
  <p style="width: 200px;font-size: 20px; font-weight: bold;"> Time : <span id="time"></span></p>
  <p style="width: 200px;font-size: 20px; font-weight: bold;"> Count No : <span id="countno">0</span></p>
  <p style="width: 200px;font-size: 20px; font-weight: bold;"> defect: <span id="defect"></span></p>
<p style="width: 200px;font-size: 20px; font-weight: bold;"> line: <span id="linenumber"></span></p>
<p style="width: 200px;font-size: 20px; font-weight: bold;"> department: <span id="department"></span></p>
  
  <p style="font-size: 20px; font-weight: bold;">Plant :-<span id="plant"> &nbsp;3F HMSI Narasapura</span></p>
 <!-- <p style="font-size: 15px;">Factory :-<span id="factory"> &nbsp;HMSI</span></p> -->
  <ul id="scannedList"></ul>
<br>
  <button style="font-weight: bold; height: 50px; width: 500px;" type="button" onclick="displayvalue()" id="submitButton" > Submit</button>
  </div>
  <div class="popup" id="popupMessage">

    Submitted successfully! <span class="checkmark">&#10004;</span>

</div>
<script>
          const form = document.getElementById('myForm');

const popup = document.getElementById('popupMessage');


form.addEventListener('submit', function(event) {

    event.preventDefault(); // Prevent actual form submission



    // Show the popup message

    popup.style.display = 'block';



    // Hide the popup message after a few seconds

    setTimeout(function() {

        popup.style.display = 'none';

    }, 3000); // 3000 milliseconds = 3 seconds

});
</script>
  <script>
    
    // Your existing JavaScript functions

    // Function to handle form submission
    document.getElementById("submitButton").addEventListener("click", function() {
      const vehicleno = document.getElementById('vehicleno').textContent;
      const time = document.getElementById('time').textContent;
      const date = document.getElementById('date').textContent;
      const count = document.getElementById('countno').textContent; // Corrected from 'count'
      const linenumber = document.getElementById('linenumber').textContent;
      const department = document.getElementById('department').textContent;
     const factory = document.getElementById('plant').textContent; // Corrected from 'factory'

      const formData = {
        vehicleno: vehicleno,
        time: time,
        date: date,
        count: count,
        linenumber: linenumber,
        department: department,
        factory: factory
      };

      
      fetch('http://192.168.0.116:8080/honda/save', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(formData)
      })
      .then(response => response.json())
      .then(data => {
        console.log('Data saved successfully:', data);
      })
      .catch(error => {
        console.error('Error saving data:', error);
      });
    });
 
    const scannedNumbers = {}; // Object to store scanned numbers and their occurrences

function updateCount() {
  const countElement = document.getElementById('countno');
  const count = Object.values(scannedNumbers).reduce((total, count) => total + count, 0);
  countElement.textContent = count;
}

function recordValue() {
  const inputValue = document.getElementById('inputValue').value;

  if (inputValue.trim() !== '') {
    const enteredValueElement = document.getElementById('vehicleno');
    const dateElement = document.getElementById('date');
    const timeElement = document.getElementById('time');
    const now = new Date();

    const formattedDate = `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')}`;
    const hours = now.getHours();
    const minutes = now.getMinutes();

    // Convert to 24-hour format
    const formattedHours = hours.toString().padStart(2, '0');
    const formattedMinutes = minutes.toString().padStart(2, '0');

    // Determine the time of day (am or pm)
    const timeOfDay = hours >= 12 ? 'pm' : 'am';

    const formattedTime = `${formattedHours}:${formattedMinutes}${timeOfDay}`;

    enteredValueElement.textContent = inputValue;
    dateElement.textContent = formattedDate;
    timeElement.textContent = formattedTime;

    if (scannedNumbers[inputValue] === undefined) {
      scannedNumbers[inputValue] = 1;
    } else {
      scannedNumbers[inputValue]--;

      if (scannedNumbers[inputValue] === 0) {
        delete scannedNumbers[inputValue];
      }
    }

    updateCount();
    document.getElementById('inputValue').value = '';
  }
}

setTimeout(simulateBarcodeScan, 3000);

 </script>
 <h1 class="text-center"></h1>
 <div class="container">
  <table class="table table-bordered">
         <thead class="table-dark">
           <tr>
             
             <th scope="col">Factory</th>
             <th scope="col">Line No</th>
             <th scope="col">Department</th>
             <th scope="col">Vehicle No</th>
             <th scope="col">Time</th>
             <th scope="col">Date</th>
             <th scope="col">Count No</th>
            
             
             
           </tr>
         </thead>
         <tbody id="table_body">
          
          
         </tbody>
       </table>
     </div>
     <link rel="stylesheet" type="text/css" href="style.css" />
    
   
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width,
      initial-scale=1.0">
      <title>Api data</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
      <script>
        fetch("http://192.168.0.116:8080/honda/come", {
  method: "GET"
  })
  .then((response) => response.json())
  .then((data) => {
  console.log(data[0].title);
  let tableData = "";
  data.forEach((values) => {
    tableData += `
      <tr>
        <td>${values.factory}</td>
        <td>${values.linenumber}</td>
        <td>${values.department}</td>
        <td>${values.vehicleno}</td>
        <td>${values.time}</td>
        <td>${values.date}</td>
        <td>${values.count}</td>
         </tr>`;
  });
  document.getElementById("table_body").innerHTML = tableData;
  })
  .catch((error) => {
  console.log("Error:", error);
  });
  
  const express = require('express');
  const app = express();
  
  
  
  // Your routes and server logic here
  
  app.listen(9023, () => {
  console.log('Server is running on port 9023');
  });
  
      </script>
      <link rel="stylesheet" type="text/css" href="style.css">
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Auto Refresh</title>
      <meta http-equiv="refresh" content="20"> <!-- Refresh every 20 seconds -->>
</head>
<body>


</body>
</html>
